{% extends "base.html" %}

{% block title %}Panel Pracownika – Lista Ostrzeżeń Konsularnych{% endblock %}

{% block head %}
<style>
    /* Stylowanie tabeli (Mock) */
    .alerts-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        margin-top: 20px;
    }
    .alerts-table th, .alerts-table td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid var(--gray-200);
    }
    .alerts-table th {
        background-color: var(--gray-50);
        color: var(--gray-700);
        font-weight: 600;
        font-size: 0.9rem;
        text-transform: uppercase;
    }
    .alerts-table tr:hover {
        background-color: var(--gray-100);
    }
    .alerts-table td:last-child {
        text-align: right;
    }
    .alerts-table a {
        text-decoration: none;
    }
    .status-badge {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        font-weight: 600;
    }
    .status-active { background-color: #d1fae5; color: #065f46; } /* Zielony */
    .status-expired { background-color: #fee2e2; color: #991b1b; } /* Czerwony */
</style>
{% endblock %}

{% block content %}
<div class="dashboard-card" style="max-width: 900px; margin: 40px auto; padding: 30px;">
    <h2>Zarządzanie Ostrzeżeniami Konsularnymi</h2>
    <p class="subtitle" style="margin-bottom: 20px;">Przegląd aktywnych i historycznych ostrzeżeń.</p>

    <table class="alerts-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Treść (fragment)</th>
                <th>Ważność</th>
                <th>Status</th>
                <th>Akcje</th>
            </tr>
        </thead>
        <tbody>
            {% for alert in alerts %} <tr>
                <td>{{ alert.external_id }}</td>
                <td>{{ alert.content|truncate(30) }}</td>
                <td>{{ alert.expiry_date.strftime('%Y-%m-%d') }}</td>
                <td>
                    {# Prosta logika sprawdzająca datę dla statusu #}
                    {% if alert.expiry_date > now %}
                        <span class="status-badge status-active">Aktywne</span>
                    {% else %}
                        <span class="status-badge status-expired">Wygasłe</span>
                    {% endif %}
                </td>
                <td>
                    <a href="#" class="btn" style="padding: 6px 10px; font-size: 0.8rem;">
                        Edytuj
                    </a>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5" style="text-align: center;">Brak ostrzeżeń w bazie danych. Uruchom skrypt synchronizacji.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}